<app-header></app-header>
<div class="login-container">
  <div class="login-content">
    <div class="login-card">
      <div class="login-header">
        <div class="logo">
          <i class="bi bi-bag-check-fill"></i>
          <h1>MyStore</h1>
        </div>
        <h2>Sign In</h2>
      </div>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
        <div class="form-group">
          <label class="form-label">Username</label>
          <input formControlName="username" type="text" placeholder="Enter username" class="form-input"
            [class.error]="loginForm.get('username')?.invalid && loginForm.get('username')?.touched" />
          <div *ngIf="loginForm.get('username')?.invalid && loginForm.get('username')?.touched" class="form-error">
            <div *ngIf="loginForm.get('username')?.hasError('required')">Username is required</div>
            <div *ngIf="loginForm.get('username')?.hasError('minlength')">Username must be at least 3 characters</div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Password</label>
          <div class="password-input">
            <input formControlName="password" [type]="showPassword ? 'text' : 'password'"
              placeholder="Enter password" class="form-input"
              [class.error]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" />
            <button type="button" (click)="togglePasswordVisibility()" class="password-toggle">
              <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
            </button>
          </div>
          <div *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" class="form-error">
            <div *ngIf="loginForm.get('password')?.hasError('required')">Password is required</div>
            <div *ngIf="loginForm.get('password')?.hasError('minlength')">Password must be at least 6 characters</div>
          </div>
        </div>

        <div *ngIf="loginError" class="error-message">
          {{ errorMessage }}
        </div>

        <button type="submit" [disabled]="!loginForm.valid" class="btn btn-primary login-btn">
          Sign In
        </button>
      </form>

      <div class="login-footer">
        <span>New user?</span>
        <a routerLink="/register">Create Account</a>
      </div>

      <div class="admin-link">
        <a routerLink="/adminlogin" class="btn btn-secondary">Admin Login</a>
      </div>
    </div>
  </div>
</div>
